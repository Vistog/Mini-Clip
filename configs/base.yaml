seed: 42
device: cuda

run:
  out_dir: runs
  name: null  # если null — сгенерируем автоматически

data:
  dataset: flickr8k
  root: data/flickr8k
  batch_size: 128
  num_workers: 2
  image_size: 224
  max_length: 32

model:
  embed_dim: 512
  image_encoder:
    name: resnet50
    pretrained: true
    trainable: false
  text_encoder:
    name: distilbert-base-uncased
    trainable: false
    pooling: mean
    unfreeze_last_n: 2
  projection:
    type: linear  # linear или mlp
    hidden_dim: 1024
    dropout: 0.0
  temperature:
    learnable: true
    init: 0.07

loss:
  type: clip_inbatch

train:
  epochs: 100
  lr: 1.0e-4
  lr_text: 2.0e-5
  lr_image: 1.0e-5
  weight_decay: 1.0e-4
  log_every: 20
  save_every: 10
  amp: true

augment:
  enabled: true
  rrc_scale: [0.7, 1.0]
  hflip_p: 0.5
  color_jitter:
    enabled: true
    brightness: 0.1
    contrast: 0.1
    saturation: 0.1
    hue: 0.05

